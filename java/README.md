# 短域名服务

#### 实现两个接口
- 短域名存储接口：接受长域名信息，返回短域名信息（/api/url/lts/{longUrl}）
- 短域名读取接口：接受短域名信息，返回长域名信息（/api/url/stl/{shortUrl}）
#### Jacoco单元测试覆盖率截图
![alt Jacoco](report/jacoco.png)

#### 设计思路及假设
- 短域名生成算法采用雪花算法，直接生成唯一长整形，然后做62进制转换，考虑到哈希算法要解决哈希碰撞问题，最终都要存储对应关系，所以未采用哈希算法
- 取长域名的hashcode和255做与操作来分片，来做入口请求分流，如果是微服务集群，可分配到后面多个服务
- 雪花算法根据上面分片方式，按各分片生成唯一短链接10进制，数据存储及缓存都采用这个作为分片依据
- 采用布隆过滤器来判断短域名是否存在，以解决缓存穿透问题
- 采用阿里sentinel限流，现实现根据IP限流，也可做熔断，未配置
- 如果做分步式，分片可采用redis cluster的slot方式
- 数据存储使用了BitMap，假设它就是一个数据库

#### 简历
[简历](report/resume.pdf)